#include "headers/s21_stringCS.h"

// Функция преобразует все латинские буквы строки str в верхний регистр.
// Возвращает новый выделенный буфер с результатом (или S21_NULL при ошибке).
void *s21_to_upper(const char *str) {
  char *res = S21_NULL;  // Указатель на результирующую строку, изначально NULL

  // Если входная строка равна NULL, возвращаем NULL
  if (str == S21_NULL) return (void *)res;

  // Получаем длину исходной строки
  s21_size_t len = s21_strlen(str);

  // Выделяем память под новую строку (с учетом завершающего '\0')
  res = (char *)calloc(len + 1, sizeof(char));
  if (res == S21_NULL)
    return (void *)res;  // Если не удалось выделить память, возвращаем NULL

  // Копируем символы из str в res, переводя строчные латинские буквы в верхний
  // регистр
  while (*str != '\0') {
    if (*str >= 97 &&
        *str <= 122)  // Если символ - строчная латинская буква ('a'..'z')
      *res =
          *str - 32;  // Преобразуем в заглавную (разница между 'a' и 'A' = 32)
    else
      *res = *str;  // Иначе копируем символ без изменений
    str++;  // Переходим к следующему символу исходной строки
    res++;  // Переходим к следующей позиции в результирующей строке
  }

  res = res -
        len;  // Возвращаем указатель res к началу строки (т.к. res был сдвинут)
  return (void *)res;  // Возвращаем указатель на новую строку
}
